# Админка для автопрокатной компании

Админка для управления автопрокатной компанией в виде Telegram mini app на React с использованием сборщика Vite.

## Описание

Проект представляет собой веб-приложение для управления автопрокатной компанией с функциями:
- Управление автомобилем
- Управление заказами
- Управление клиентами
- Панель управления с обзором ключевых метрик

## Технологии

- React 18
- Vite
- React Router DOM
- CSS Modules

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://git@git.sourcecraft.dev/smsforward2/car-rental-admin.git
   ```

2. Перейдите в директорию проекта:
   ```bash
   cd car-rental-admin
   ```

3. Установите зависимости:
   ```bash
   npm install
   ```

4. Запустите приложение в режиме разработки:
   ```bash
   npm run dev
   ```

5. Откройте браузер и перейдите по адресу, указанному в терминале (обычно http://localhost:5173)

## Сборка для продакшена

Для создания продакшен-сборки выполните:
```bash
npm run build
```

Собранные файлы будут находиться в директории `dist`.

Для предварительного просмотра продакшен-сборки:
```bash
npm run preview
```

## Работа с внешними скриптами

В проекте реализована утилита для безопасной загрузки внешних скриптов, которая заменяет использование `document.write`. Утилита находится в `src/utils/scriptLoader.js`.

### Основные функции утилиты:

1. `loadScript(src, options)` - загрузка одного скрипта
2. `loadScriptsSequentially(scripts)` - последовательная загрузка нескольких скриптов
3. `loadScriptsParallel(scripts)` - параллельная загрузка нескольких скриптов
4. `removeScript(src)` - удаление скрипта

### Пример использования:

```javascript
import { loadScript } from './utils/scriptLoader';

// Загрузка одного скрипта
loadScript('https://example.com/some-library.js')
  .then(() => {
    console.log('Скрипт загружен');
    // Использование функций из внешнего скрипта
  })
  .catch((error) => {
    console.error('Ошибка загрузки:', error);
  });
```

## Структура проекта

```
src/
├── components/          # Компоненты приложения
│   ├── Navigation.jsx   # Навигация
│   ├── Dashboard.jsx    # Панель управления
│   ├── CarManagement.jsx # Управление автомобилями
│   ├── OrderManagement.jsx # Управление заказами
│   └── CustomerManagement.jsx # Управление клиентами
├── utils/              # Вспомогательные утилиты
│   └── scriptLoader.js   # Утилита для загрузки скриптов
├── App.css             # Стили приложения
├── App.jsx             # Корневой компонент
└── main.jsx            # Точка входа
```

## Маршруты

- `/` - Панель управления
- `/cars` - Управление автомобилями
- `/orders` - Управление заказами
- `/customers` - Управление клиентами

## Интеграция с Telegram

Для интеграции с Telegram Web App используйте официальную библиотеку `@twa-dev/sdk`:

```bash
npm install @twa-dev/sdk
```

Пример использования:
```javascript
import { init } from '@twa-dev/sdk';

// Инициализация Telegram Web App
init();
```